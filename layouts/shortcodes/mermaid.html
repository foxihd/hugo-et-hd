<figure class="fullwidth">
	<picture class="mermaid"
		{{- with .Get "title" }}title="{{ . }}"
		{{- end }}
		>
		{{- .Inner | safeHTML -}}
	</picture>
	{{- with .Get "caption" }}
	<figcaption>{{ . }}</figcaption>
	{{- end }}
</figure>
{{- if le (.Page.Scratch.Get "hasMermaid") 0 }}
{{- .Page.Scratch.Add "hasMermaid" 1 }}
<script type="module">
	import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
	mermaid.initialize({ startOnLoad: true });
</script>
{{- end }}